{
  "name": "{{ webhook_alias }} 错误警报",
  "dsl": {
    "schema": "2.0",
    "config": {
      "update_multi": true,
      "style": {
        "text_size": {
          "normal_v2": {
            "default": "normal",
            "pc": "normal",
            "mobile": "heading"
          }
        }
      }
    },
    "body": {
      "direction": "vertical",
      "elements": [
        {
          "tag": "markdown",
          "content": "**<font color='red'>{{ exception_class_name | e }}</font>**: {{ full_error_message | e }}",
          "text_align": "left",
          "text_size": "normal_v2",
          "margin": "0px 0px 0px 0px",
          "element_id": "{{ element_id_1 }}"
        },
        {
          "tag": "column_set",
          "flex_mode": "stretch",
          "horizontal_spacing": "8px",
          "horizontal_align": "left",
          "columns": [
            {
              "tag": "column",
              "width": "weighted",
              "background_style": "{{ project_bg_color | e }}",
              "elements": [
                {
                  "tag": "markdown",
                  "content": "<font color='grey'>项目名称</font>",
                  "text_align": "center",
                  "text_size": "normal"
                },
                {
                  "tag": "markdown",
                  "content": "<font color='{{ project_fg_color | e }}'>{{ project_id | e }}</font>",
                  "text_align": "center",
                  "text_size": "normal_v2"
                }
              ],
              "padding": "12px 12px 12px 12px",
              "vertical_spacing": "2px",
              "horizontal_align": "left",
              "vertical_align": "top",
              "weight": 1
            },
            {
              "tag": "column",
              "width": "weighted",
              "background_style": "{{ env_bg_color | e }}",
              "elements": [
                {
                  "tag": "markdown",
                  "content": "<font color='grey'>环境</font>",
                  "text_align": "center",
                  "text_size": "normal"
                },
                {
                  "tag": "markdown",
                  "content": "<font color='{{ env_fg_color | e }}'>{{ environment_name | e }}</font>",
                  "text_align": "center",
                  "text_size": "normal_v2"
                }
              ],
              "padding": "12px 12px 12px 12px",
              "direction": "vertical",
              "horizontal_spacing": "8px",
              "vertical_spacing": "2px",
              "horizontal_align": "left",
              "vertical_align": "top",
              "weight": 1
            },
            {
              "tag": "column",
              "width": "weighted",
              "background_style": "{{ host_bg_color | e }}",
              "elements": [
                {
                  "tag": "markdown",
                  "content": "<font color='grey'>服务器</font>",
                  "text_align": "center",
                  "text_size": "normal"
                },
                {
                  "tag": "markdown",
                  "content": "<font color='{{ host_fg_color | e }}'>{{ hostname | e }}</font>",
                  "text_align": "center",
                  "text_size": "normal_v2"
                }
              ],
              "padding": "12px 12px 12px 12px",
              "vertical_spacing": "2px",
              "horizontal_align": "left",
              "vertical_align": "top",
              "weight": 1
            }
          ],
          "margin": "0px 0px 0px 0px"
        },
        {
          "tag": "markdown",
          "content": "• **发布版本**: {{ commit_hash | e }}\n• **错误时间**: {{ current_timestamp | e }}",
          "text_align": "left",
          "text_size": "normal_v2",
          "margin": "0px 0px 0px 0px",
          "element_id": "{{ element_id_2 }}"
        }{% if issue_url %},
        {
          "tag": "button",
          "text": { "tag": "plain_text", "content": "查看错误详情" },
          "type": "primary_filled",
          "width": "fill",
          "behaviors": [
            {
              "type": "open_url",
              "default_url": "{{ issue_url | e }}",
              "pc_url": "",
              "ios_url": "",
              "android_url": ""
            }
          ],
          "margin": "4px 0px 4px 0px",
          "element_id": "{{ element_id_3 }}"
        }{% endif %}
      ]
    },
    "header": {
      "title": {
        "tag": "plain_text",
        "content": "GlitchTip 报错告警 - {{ issue_identifier | e }}"
      },
      "subtitle": { "tag": "plain_text", "content": "" },
      "template": "red",
      "padding": "12px 8px 12px 8px"
    }
  },
  "variables": []
}
